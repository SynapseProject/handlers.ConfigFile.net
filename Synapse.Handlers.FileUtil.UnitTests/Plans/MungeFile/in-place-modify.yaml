Name: SamplePlan
Actions:
- Name: Action001
  Handler:
    Type: synapse.handlers.Fileutil:MungeFileHandler
    Config: 
      Type: Yaml
      Values:
        Type: INI
        BackupSource: true
        CreateSettingIfNotFound: true
  Parameters:
    Values:
      Files:
      - Source: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\system.ini
        SettingsFile:
          Name: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\initransform.csv
        Settings:
        - Key: TESTKEY
          Value: NEWTESTVALUE
        - Key: SECTION2
          Value: This is not a section
        - Key: "[NEWSECTION]:KEY"
          Value: Value for NEWSECTION:KEY
      - Source: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\config.properties
        SettingsFile: 
          Name: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\kvptransform.csv
        Type: KeyValue
        Settings:
        - Key: color\=foreground
          Value: new color
        - Key: path
          Value: c:\\temp\\newpath\\doc1
      - Source: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\regex.config
        SettingsFile: 
          Name: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\regextransform.csv
        Type: Regex
        Settings:
        - Key: (SET\s*ENDUR_VER\s*=\s*).*?$
          Value: ${1}NEW_VERSION_NUMBER_HERE
      - Source: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\xpath.config
        SettingsFile:
          Name: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\xpathtransform.csv
        Type: XPath
        Settings:
        - Key: "//configuration/applicationSettings/MyService.Properties.Settings/setting[@name=\"initVector\"]/value"
          Value: "MyNewValue"
      - Source: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\web.config
        SettingsFile:
          Name: C:\Siew Hooi\wip\handlers.FileUtil.net\Synapse.Handlers.FileUtil.UnitTests\WorkingDir\xmltransform.xml
        Type: XmlTransform